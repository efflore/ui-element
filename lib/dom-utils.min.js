import t,{effect as e,unwrap as s}from"../index.js";const o="data-",r="ui-effect",i="-text",a="-prop",c="-attr",n="-class",l="-style",d=t=>void 0!==t,u=(t,e,s)=>{for(const o of(t.shadowRoot||t).querySelectorAll(`[${e}]`))s(o),o.removeAttribute(e)},f=(t,e,o=e)=>{Array.from(t.childNodes).filter((t=>t.nodeType!==Node.COMMENT_NODE)).forEach((t=>t.remove())),t.append(document.createTextNode(s(o)))},b=(t,e,s)=>{d(s)?t[e]=s:delete t[e]},m=(t,e,o)=>{"boolean"==typeof o?t.toggleAttribute(e,o):d(o)?t.setAttribute(e,s(o)):t.removeAttribute(e)},g=(t,e,o)=>{t.classList.toggle(e,s(o))},h=(t,e,o)=>{d(o)?t.style.setProperty(e,s(o)):t.style.removeProperty(e)},p=t=>{[i,a,c,n,l].forEach((s=>{const r=`${o}${t.localName}${s}`;if(s===i)u(t,r,(s=>{const o=s.getAttribute(r).trim(),i=s.textContent||"";t.set(o,i,!1),e((e=>{if(t.has(o)){const r=t.get(o);e(s,f,!0,d(r)?r:i)}}))}));else{const o=(t,e)=>({[a]:()=>t[e],[c]:()=>t.getAttribute(e),[n]:()=>t.classList.contains(e),[l]:()=>t instanceof HTMLElement&&t.style[e]}[s]()),i=()=>({[a]:b,[c]:m,[n]:g,[l]:h}[s]);u(t,r,(s=>{const a=(t,e)=>t.split(e).map((t=>t.trim()));a(s.getAttribute(r),";").forEach((r=>{let[c,n]=a(r,":");!n&&(n=c),t.set(n,o(s,c),!1),e((e=>{t.has(n)&&e(s,i(),c,t.get(n))}))}))}))}}))},y=t=>{if(!t.get("debug"))return;const e=(e,s,o)=>u(t,e,(i=>{const a=i.getAttribute(e).trim();i.addEventListener(s,(()=>{for(const e of t.targets(a))e.classList.add(r)})),i.addEventListener(o,(()=>{for(const e of t.targets(a))e.classList.remove(r)}))}));e(`${o}${t.localName}-hover`,"mouseenter","mouseleave"),e(`${o}${t.localName}-focus`,"focus","blur")},A=(e,s={},o,r)=>{const i=class extends t{static observedAttributes=Object.keys(s);attributeMap=s;connectedCallback(){"string"==typeof this.getAttribute("debug")&&this.set("debug",!0),o&&o(this),p(this),y(this)}disconnectedCallback(){r&&r(this)}};return i.define(e),i};export{A as component,f as setText,m as setAttr,g as setClass,b as setProp,h as setStyle,p as autoEffects,y as highlightTargets};