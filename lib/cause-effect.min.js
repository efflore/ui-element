let t;const e=e=>{const n=new WeakMap,o=t=>(!n.has(t)&&n.set(t,new Set),n.get(t)),s={get:()=>(t&&o(s).add(t),e),set:t=>{const n=e;if(e="function"==typeof t?t(n):t,!Object.is(e,n))for(const t of o(s))t.get()}};return s},n=e=>{const n={get:()=>{const o=t;t=n;const s=e();return t=o,s}};return n},o=t=>n(t).get();export{e as cause,n as derive,o as effect};