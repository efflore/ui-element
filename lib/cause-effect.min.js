const t=t=>"function"==typeof t;let e;const n=n=>{const o=new WeakMap,s=t=>(!o.has(t)&&o.set(t,new Set),o.get(t)),c={get:()=>(e&&s(c).add(e),n),set:e=>{const o=n;if(n=t(e)?e(o):e,!Object.is(n,o))for(const t of s(c))t.get()}};return c},o=t=>{const n={get:()=>{const o=e;e=n;const s=t();return e=o,s}};return n},s=t=>o(t).get();export{n as cause,o as derive,s as effect,t as isFunction};