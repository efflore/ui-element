const t=t=>"function"==typeof t;let e;const s=s=>{const n=()=>(e&&n.e.add(e),s);return n.e=new Set,n.set=e=>{const a=s;if(s=t(e)&&!t(s.set)?e(a):e,!Object.is(s,a))for(const t of n.e)t()},n};export default class extends HTMLElement{static define(t,e=customElements){try{e.get(t)||e.define(t,this)}catch(t){console.error(t)}}attributeMap={};#t=new Map;attributeChangedCallback(e,s,n){if(n!==s){const a=this.attributeMap[e],[o,r]=Array.isArray(a)?a:[e,a],i={boolean:t=>"string"==typeof t,integer:t=>parseInt(t,10),number:t=>parseFloat(t)},c=t(r)?r:i[r];this.set(o,c?c(n,s):n)}}has(t){return this.#t.has(t)}get(e){const s=e=>t(e)?s(e()):e;return s(this.#t.get(e))}set(e,n,a=!0){if(this.#t.has(e)){const s=this.#t.get(e);a&&t(s.set)&&s.set(n)}else{const a=t(n)&&t(n.set)?n:s(n);this.#t.set(e,a)}}delete(t){return this.#t.delete(t)}pass(e,n,a=customElements){a.whenDefined(e.localName).then((()=>{for(const[a,o]of Object.entries(n))e.set(a,s(t(o)?o:this.#t.get(o)))}))}effect(t){const s=()=>{requestAnimationFrame((()=>{const n=e;e=s;const a=t();"function"==typeof a&&a(),e=n}))};s()}}