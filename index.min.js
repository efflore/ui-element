const e=e=>t=>typeof t===e,t=e("symbol"),r=e("number"),a=e("string"),s=e("object"),n=e=>a(e)||t(e)||r(e),o=e("function"),i=(e,...t)=>o(e)?e(...t):void 0,l=e=>null===e,c=e=>null==e,u=e=>null!=e,d=e=>u(e)&&(s(e)||o(e)),p=(e,t)=>d(e)&&Symbol.toStringTag in e&&e[Symbol.toStringTag]===t,g=e=>e.nodeType===Node.COMMENT_NODE,b="debug",m="info",h="warn",y="error",v=(e,t,r=b)=>([y,h].includes(r)&&console[r](t,e),e),f="Ok",w="None",S="Fail",x=e=>({[Symbol.toStringTag]:f,value:e,map:t=>x(t(e)),flatMap:t=>t(e),filter:t=>t(e)?x(e):$(),guard:t=>t(e)?x(e):$(),or:()=>x(e),get:()=>e}),$=()=>{const e=()=>$();return{[Symbol.toStringTag]:w,map:e,flatMap:e,filter:e,guard:e,or:e=>N(e),get:()=>{}}},k=e=>{const t=()=>k(e);return{[Symbol.toStringTag]:S,error:e,map:t,flatMap:t,filter:t,guard:t,or:e=>N(e),get:()=>{throw e}}},M=e=>p(e,f),A=e=>p(e,w),C=e=>p(e,S),E=e=>M(e)||A(e)||C(e),N=e=>u(e)?x(e):$(),T=e=>{try{return N(e())}catch(e){return k(e)}},O=(e,t=0,r=1e3)=>{const a=async(t,r)=>{const s=T((async()=>await e()));return await j({[S]:async e=>t<1?k(e):(await new Promise((e=>setTimeout(e,r))),a(t-1,2*r))})(s)};return a(t,r)},q=(...e)=>e.reduce(((e,t)=>i(t,e))),j=e=>t=>{const r=e[t[Symbol.toStringTag]]||e.else,a=(e,t)=>e&&t in e&&e[t]||void 0,s=N(a(t,"value")).or(a(t,"error")).get();return N(r).guard(o).map((e=>e(s))).or(s).get()},L="State",F="Computed";let I;const{enqueue:P,cleanup:R}=(()=>{const e=new Map,t=new Map;let r;const a=(e,t)=>{const r=T(e);j({[S]:e=>v(e,t,y)})(r)},s=()=>{r=null,e.forEach(((e,t)=>e.forEach(((e,r)=>a(e(t),`Effect ${r} on ${t?.localName||"unknown"} failed`))))),e.clear(),t.forEach((e=>a(e,"Cleanup failed"))),t.clear()},n=e=>(t,a)=>{const n=!e.has(t);e.set(t,a),n&&(r&&cancelAnimationFrame(r),r=requestAnimationFrame(s))};return queueMicrotask(s),{enqueue:(t,r,a)=>{return n((s=t,e.has(s)||e.set(s,new Map),e.get(s)))(r,a);var s},cleanup:n(t)}})(),V=e=>{I&&e.add(I)},z=e=>e.forEach((e=>e())),U=(e,t)=>{const r=I;I=t;const a=T(e);j({[S]:e=>v(e,"Error during reactive computation",y)})(a),I=r},D=e=>p(e,L),J=e=>p(e,F),H=e=>D(e)||J(e),K=e=>{const t=new Set;return{[Symbol.toStringTag]:L,get:()=>(V(t),e),set(r){const a=e;e=o(r)&&r.length?r(e):r,Object.is(e,a)||z(t)},get targets(){return[...t]}}},_=(e,t=!1)=>{const r=new Set;let a,s=!0;const n=()=>{s=!0,t&&z(r)};return{[Symbol.toStringTag]:F,get:()=>(V(r),t&&!s||U((()=>{a=e(),s=c(a)}),n),a),get targets(){return[...r]}}},B=e=>{const t=()=>U((()=>N(e(P)).guard(o).map((t=>R(e,t)))),t);t()},G="UI",Q=(e,t=e)=>({[Symbol.toStringTag]:"UI",host:e,target:t}),W=e=>x(Q(e)),X=e=>t=>N(e.root.querySelector(t)).map((t=>Q(e,t))),Y=e=>t=>Array.from(e.root.querySelectorAll(t)).map((t=>Q(e,t))),Z=e=>o(e)&&!!e.length,ee=(e,t,r,a=void 0)=>N(e.constructor.attributeMap[t]).guard(Z).map((t=>t(N(r),e,a))).or(r).get(),te="context-request";class re extends Event{context;callback;subscribe;constructor(e,t,r=!1){super(te,{bubbles:!0,composed:!0}),this.context=e,this.callback=t,this.subscribe=r}}const ae="debug",se=e=>{return`<${e.localName}${r=e.id,r?`#${r}`:""}${t=e.classList,t.length?`.${Array.from(t).join(".")}`:""}>`;var t,r};class ne extends HTMLElement{static registry=customElements;static attributeMap={};static observedAttributes;static consumedContexts;static providedContexts;static define(e){const t=T((()=>ne.registry.define(e,this)));j({[S]:t=>v(e,t.message,y),[f]:()=>v(e,"Registered custom element")})(t)}signals=new Map;internals;self=W(this);root=this.shadowRoot||this;attributeChangedCallback(e,t,r){r!==t&&this.set(e,ee(this,e,r,t))}connectedCallback(){a(this.getAttribute(ae))&&(this[ae]=!0),(e=>{const t=e.constructor,r=t.consumedContexts||[];setTimeout((()=>{for(const t of r)e.dispatchEvent(new re(t,(r=>e.set(String(t),r))))}));const a=t.providedContexts||[];a.length&&e.addEventListener(te,(t=>{const{context:r,callback:s}=t;a.includes(r)&&o(s)&&(t.stopPropagation(),s(e.signals.get(String(r))))}))})(this)}disconnectedCallback(){}adoptedCallback(){}has(e){return this.signals.has(e)}get(e){const t=e=>d(e)?o(e)?t(e()):H(e)||E(e)?t(e.get()):e:e;return t(this.signals.get(e))}set(e,t,r=!0){if(C(t))return void v(t.error,`Unhandled error before trying to set state '${e}' in <${this.localName}>`,y);const n=E(t)?t.get():t;if(this.signals.has(e)){if(r){const t=this.signals.get(e);H(n)?(this.signals.set(e,n),t.targets.forEach((e=>e()))):D(t)?t.set(n):v(n,`Computed state ${(e=>a(e)?`"${e}"`:s(e)?JSON.stringify(e):u(e)?String(e):"undefined")(e)} in ${se(this)} cannot be set`,y)}}else this.signals.set(e,H(n)?n:K(n))}delete(e){return this.signals.delete(e)}first=X(this);all=Y(this)}const oe=e=>async t=>{await t.host.constructor.registry.whenDefined(t.target.localName);for(const[r,a=r]of Object.entries(e)){const e=n(a)?t.host.signals.get(a):H(a)?a:o(a)?K(a):t.host.signals.get(a);t.target.set(r,e)}return t},ie=(e,t)=>r=>(r.target.addEventListener(e,t),r),le=(e,t)=>r=>(r.target.removeEventListener(e,t),r),ce=(e,t=e)=>r=>(B((()=>{r.target.dispatchEvent(new CustomEvent(e,{detail:r.host.get(t),bubbles:!0}))})),r),ue=e=>N(u(e.get())),de=e=>e.map((e=>parseInt(e,10))).filter(Number.isFinite),pe=e=>e.map(parseFloat).filter(Number.isFinite),ge=e=>e,be=e=>{const t=T((()=>e.map((e=>JSON.parse(e)))));return j({[S]:e=>(v(e,"Failed to parse JSON",y),$())})(t)},me=(e,t)=>r=>{const{key:s,read:n,update:i}=t,{host:u,target:d}=r,p=n(d);if(!o(e)){const t=a(e)&&a(p)?ee(u,e,p):p;u.set(e,t,!1)}return B((r=>{const a=n(d),g=o(e)?e(a):u.get(e);if(!Object.is(g,a)){const e=l(g)&&t.delete?t.delete:c(g)?i(p):i(g);r(d,s,e)}})),r},he=e=>me(e,{key:"t",read:e=>e.textContent||"",update:e=>t=>()=>{Array.from(t.childNodes).filter((e=>!g(e))).forEach((e=>e.remove())),t.append(document.createTextNode(e))}}),ye=(e,t=e)=>me(t,{key:`p:${String(e)}`,read:t=>t[e],update:t=>r=>()=>r[e]=t}),ve=(e,t=e)=>me(t,{key:`a:${e}`,read:t=>t.getAttribute(e),update:t=>r=>()=>r.setAttribute(e,t),delete:t=>()=>t.removeAttribute(e)}),fe=(e,t=e)=>me(t,{key:`a:${e}`,read:t=>t.hasAttribute(e),update:t=>r=>()=>r.toggleAttribute(e,t)}),we=(e,t=e)=>me(t,{key:`c:${e}`,read:t=>t.classList.contains(e),update:t=>r=>()=>r.classList.toggle(e,t)}),Se=(e,t=e)=>me(t,{key:`s:${e}`,read:t=>t.style.getPropertyValue(e),update:t=>r=>()=>r.style.setProperty(e,t),delete:t=>()=>t.style.removeProperty(e)}),xe="aria",$e="button",ke="checkbox",Me="combobox",Ae="dialog",Ce="grid",Ee="gridcell",Ne="heading",Te="link",Oe="listbox",qe="listitem",je="menuitem",Le="menuitemcheckbox",Fe="menuitemradio",Ie="option",Pe="progressbar",Re="radio",Ve="range",ze="row",Ue="scrollbar",De="separator",Je="slider",He="spinbutton",Ke="switch",_e="tab",Be="table",Ge="tabpanel",Qe="textbox",We="tree",Xe="treegrid",Ye="treeitem",Ze={atomic:"atomic",autocomplete:["autocomplete","AutoComplete"],busy:"busy",checked:"checked",colcount:["colcount","ColCount"],colindex:["colindex","ColIndex"],colspan:["colspan","ColSpan"],controls:"controls",current:"current",description:"description",disabled:"disabled",expanded:"expanded",haspopup:["haspopup","HasPopup"],hidden:"hidden",keyshortcuts:["keyshortcuts","KeyShortcuts"],label:"label",level:"level",live:"live",modal:"modal",multiline:["multiline","MultiLine"],multiselectable:["multiselectable","MultiSelectable"],orientation:"orientation",placeholder:"placeholder",posinset:["posinset","PosInSet"],pressed:"pressed",readonly:["readonly","ReadOnly"],relevant:"relevant",required:"required",roledescription:["roledescription","RoleDescription"],rowcount:["rowcount","RowCount"],rowindex:["rowindex","RowIndex"],rowspan:["rowspan","RowSpan"],selected:"selected",setsize:["setsize","SetSize"],sorted:"sorted",valuemax:["valuemax","ValueMax"],valuemin:["valuemin","ValueMin"],valuenow:["valuenow","ValueNow"],valuetext:["valuetext","ValueText"]},et=(e,t)=>r=>{if(!r.internals)return;const{key:a,initial:s,read:n,update:i}=t;r.set(e,s(r),!1),B((s=>{const l=n(r),u=o(e)?e(l):r.get(e),d=c(u)&&t.delete?t.delete:i(u);Object.is(u,l)||s(r,a,d)}))},tt=(e,t)=>et(e,{key:`i-${e}`,initial:t=>t.hasAttribute(e),read:t=>t.internals.states.has(e),update:r=>a=>()=>{a.internals.states[r?"add":"delete"](e),t&&(a.internals[t]=String(r),a.setAttribute(`${xe}-${e}`,String(r))),a.toggleAttribute(e,r)}}),rt=(e,t)=>et(e,{key:`i-${e}`,initial:t=>t.getAttribute(e),read:r=>ee(r,e,r.internals[t]),update:r=>a=>()=>{a.internals[t]=r,a.setAttribute(`${xe}-${e}`,r)},delete:r=>()=>{r.internals[t]=void 0,r.removeAttribute(`${xe}-${e}`)}}),at=e=>{const t=e.constructor;if(!t.observedAttributes)return;const r=(e,t)=>t.forEach((t=>{return Array.isArray(t)?e.set(t[0],t[1]):t&&e.set(t,(r=t).charAt(0).toUpperCase()+r.slice(1));var r})),a=(e,t)=>t.includes(e),s=e=>a(e,[Ce,Be,Xe]),n=e=>a(e,[Ve,Pe,Je,He]);e.internals||(e.internals=e.attachInternals());const o=e.role,i=new Map([]);r(i,[Ze.disabled,Ze.hidden,a(o,[Ae])&&Ze.modal,a(o,[Qe])&&Ze.multiline,(e=>a(e,[Oe,Ce,Be,We]))(o)&&Ze.multiselectable,(e=>a(e,[Ee,He,Qe]))(o)&&Ze.readonly,(e=>a(e,[Me,Oe,Ee,He,Qe]))(o)&&Ze.required,(e=>a(e,[Ee,qe,Ie,_e,Ye]))(o)&&Ze.selected,n(o)&&Ze.valuetext]);const l=new Map;(e=>a(e,[Ne,qe,Ye]))(o)&&r(l,[Ze.level]),(e=>a(e,[qe,Ye]))(o)&&r(l,[Ze.posinset]),(e=>a(e,[qe,Ie,ze,_e,Ye]))(o)&&r(l,[Ze.setsize]),s(o)&&r(l,[Ze.colcount,Ze.colindex,Ze.colspan,Ze.rowcount,Ze.rowspan,Ze.rowindex]),n(o)&&r(l,[Ze.valuemax,Ze.valuemin,Ze.valuenow]);const c=new Map;r(c,[(e=>a(e,[Me,Qe]))(o)&&Ze.autocomplete,Ze.controls,Ze.description,(e=>a(e,[$e,Me,Ce,Te,Oe,je,ze,Ge,Ye]))(o)&&Ze.expanded,Ze.keyshortcuts,Ze.label,(e=>a(e,[Ge,Pe,Ue,De,Je]))(o)&&Ze.orientation,a(o,[Qe])&&Ze.placeholder,o&&Ze.roledescription,s(o)&&Ze.sorted]),r(t.attributeMap[Ze.current]===ue?i:c,[Ze.current]),(e=>a(e,[ke,Le,Fe,Re,Ke]))(o)&&r(t.attributeMap[Ze.checked]===ue?i:c,[Ze.checked]),(e=>a(e,[$e,Te,je,Me,Ee]))(o)&&r(t.attributeMap[Ze.haspopup[0]]===ue?i:c,[Ze.haspopup]),(e=>a(e,[$e,Ke]))(o)&&r(t.attributeMap[Ze.pressed]===ue?i:c,[Ze.pressed]),e.hasAttribute(`${xe}-${Ze.live}`)&&(r(i,[Ze.atomic,Ze.busy]),r(c,[Ze.live,Ze.relevant]));for(const r of t.observedAttributes)l.has(r)?(Object.hasOwn(t.attributeMap,r)||(t.attributeMap[r]="value"===r.slice(0,5)?pe:de),rt(r,`${xe}${l.get(r)}`)(e)):c.has(r)?rt(r,`${xe}${c.get(r)}`)(e):i.has(r)&&(Object.hasOwn(t.attributeMap,r)||(t.attributeMap[r]=ue),tt(r,`${xe}${i.get(r)}`)(e))};export{b as LOG_DEBUG,y as LOG_ERROR,m as LOG_INFO,h as LOG_WARN,F as TYPE_COMPUTED,S as TYPE_FAIL,w as TYPE_NONE,f as TYPE_OK,L as TYPE_STATE,G as TYPE_UI,ne as UIElement,Y as all,ue as asBoolean,de as asInteger,be as asJSON,pe as asNumber,ge as asString,i as callFunction,_ as computed,B as effect,ce as emit,k as fail,X as first,q as flow,g as isComment,J as isComputed,u as isDefined,d as isDefinedObject,C as isFail,o as isFunction,A as isNone,l as isNull,c as isNullish,r as isNumber,s as isObject,p as isObjectOfType,M as isOk,n as isPropertyKey,E as isResult,H as isSignal,D as isState,a as isString,t as isSymbol,v as log,j as match,N as maybe,$ as none,le as off,x as ok,ie as on,ee as parse,oe as pass,T as result,W as self,ve as setAttribute,rt as setInternal,ye as setProperty,Se as setStyle,he as setText,K as state,at as syncInternals,O as task,fe as toggleAttribute,we as toggleClass,tt as toggleInternal,Q as ui,me as updateElement};
