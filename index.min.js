const t=t=>"function"==typeof t,e=(e,s=[],a=e)=>t(e)?e.call(...s):a;let s;const a=new WeakMap,n=t=>{const e={get:()=>{const a=s;s=e;const n=t();return s=a,n}};return e};export default class extends HTMLElement{static define(t,e=customElements){try{e.get(t)||e.define(t,this)}catch(t){console.error(t)}}attributeMap;#t=new Map;attributeChangedCallback(s,a,n){if(n!==a){const r=this.attributeMap?.get(s),[i,o]=Array.isArray(r)?r:[s,r],c={boolean:t=>"string"==typeof t,integer:t=>parseInt(t,10),number:t=>parseFloat(t)};this.set(i,e(t(o)?o:c[o],[this,n,a],n))}}has(t){return this.#t.has(t)}get(t){return this.#t.get(t)?.get()}set(r,i,o=!0){return this.#t.has(r)?o?e(this.#t.get(r).set,[this,i]):this.#t.get(r):this.#t.set(r,t(i)?n(i):(t=>{const n=t=>(!a.has(t)&&a.set(t,new Set),a.get(t)),r={get:()=>(s&&n(r).add(s),t),set:s=>{const a=t;t=e(s,[r,a],s),!Object.is(t,a)&&n(r).forEach((t=>t.get()))}};return r})(i))}delete(t){return this.#t.delete(t)}effect(t){requestAnimationFrame((()=>n(t).get()))}}