let t;const e=t=>"function"==typeof t,s=t=>e(t)&&e(t.set),o=o=>{const c=()=>(t&&c.effects.add(t),o);return c.effects=new Set,c.set=t=>{const n=o;if(o=e(t)&&!s(t)?t(n):t,!Object.is(o,n))for(const t of c.effects)t()},c},c=s=>{const o=new Map,c=()=>{const n=t;t=c;const a=s(((t,e)=>{!o.has(t)&&o.set(t,new Set),o.get(t).add(e)}));t=n,(o.size||a)&&queueMicrotask((()=>{for(const t of o.values())for(const e of t)e();e(a)&&a()}))};c.targets=o,c()},n="context-request";class a extends Event{context;callback;subscribe;constructor(t,e,s=!1){super(n,{bubbles:!0,composed:!0}),this.context=t,this.callback=e,this.subscribe=s}}const r=(t,s)=>Array.isArray(t)?t:[s,e(t)?t:t=>t];class i extends HTMLElement{static define(t,e=customElements){try{e.get(t)||e.define(t,this)}catch(t){console.error(t)}}attributeMap={};contextMap={};#t=new Map;attributeChangedCallback(t,s,o){if(o!==s){const c=this.attributeMap[t],[n,a]=r(c,t);this.set(n,e(a)?a(o,this,s):o)}}connectedCallback(){const t=Object.getPrototypeOf(this),s=t.providedContexts||[];s.length&&this.addEventListener(n,(t=>{const{context:o,callback:c}=t;s.includes(o)&&e(c)&&(t.stopPropagation(),c(this.#t.get(o)))})),setTimeout((()=>{t.consumedContexts?.forEach((t=>{const s=new a(t,(s=>{const o=this.contextMap[t],[c,n]=r(o,t);this.#t.set(c||t,e(n)?n(s,this):s)}));this.dispatchEvent(s)}))}))}has(t){return this.#t.has(t)}get(t){const s=t=>e(t)?s(t()):t;return s(this.#t.get(t))}set(t,e,c=!0){if(this.#t.has(t)){const o=this.#t.get(t);c&&s(o)&&o.set(e)}else{const c=s(e)?e:o(e);this.#t.set(t,c)}}delete(t){return this.#t.delete(t)}async pass(t,s,c=customElements){await c.whenDefined(t.localName);for(const[c,n]of Object.entries(s))t.set(c,o(e(n)?n:this.#t.get(n)))}targets(t){const e=new Set;for(const s of this.#t.get(t).effects)for(const t of s.targets.keys())e.add(t);return e}}const l=t=>"string"==typeof t,f=t=>parseInt(t,10),u=t=>parseFloat(t),h=t=>t,d="text",g="prop",b="attr",p="class",m="style",y=t=>void 0!==t,E=t=>{const e=t.shadowRoot||t,s=()=>t;var o;return s.first=t=>{const s=e.querySelector(t);return s&&E(s)},s.all=t=>Array.from(e.querySelectorAll(t)).map((t=>E(t))),s[d]={get:()=>t.textContent?.trim()||"",set:e=>{Array.from(t.childNodes).filter((t=>t.nodeType!==Node.COMMENT_NODE)).forEach((t=>t.remove())),t.append(document.createTextNode(e))}},s[g]={get:e=>t[e],set:(e,s)=>t[e]=s},s[b]={get:e=>t.getAttribute(e),set:(e,s)=>"boolean"==typeof s?t.toggleAttribute(e,s):y(s)?t.setAttribute(e,s):t.removeAttribute(e)},s[p]={get:e=>t.classList.contains(e),set:(e,s)=>t.classList.toggle(e,s)},((o=t)instanceof HTMLElement||o instanceof SVGElement||o instanceof MathMLElement)&&(s[m]={get:e=>t.style.getPropertyValue(e),set:(e,s)=>y(s)?t.style.setProperty(e,s):t.style.removeProperty(e)}),s},v=(t,e,s)=>{const o=`data-${t.localName}-${e}`,c=t=>{s(t,t.getAttribute(o)),t.removeAttribute(o)};t.hasAttribute(o)&&c(t);for(const e of t.querySelectorAll(`[${o}]`))c(e)},x="hover",A="focus",M=(t,e={},s,o)=>{const n=class extends i{static observedAttributes=Object.keys(e);attributeMap=e;connectedCallback(){var t;super.connectedCallback(),s&&s(this),t=this,[d,g,b,p,m].forEach((e=>{v(t,e,e===d?(s,o)=>{const n=o.trim(),a=E(s)[e],r=a.get();t.set(n,r,!1),c((e=>{if(t.has(n)){const o=t.get(n);e(s,(()=>a.set(y(o)?o:r)))}}))}:(s,o)=>{const n=(t,e)=>t.split(e).map((t=>t.trim()));n(o,";").forEach((o=>{const[a,r=a]=n(o,":"),i=E(s)[e];t.set(r,i.get(),!1),c((e=>{if(t.has(r)){const o=t.get(r);e(s,(()=>i.set(a,o)))}}))}))})})),((t,e="ui-effect")=>{[x,A].forEach((s=>{const[o,c]=s===x?["mouseenter","mouseleave"]:["focus","blur"];v(t,s,((s,n)=>{const a=n.trim(),r=(o,c)=>s.addEventListener(o,(()=>{for(const s of t.targets(a))s.classList.toggle(e,c)}));r(o,!0),r(c,!1)}))}))})(this)}disconnectedCallback(){o&&o(this)}};return n.define(t),n};export{i as UIElement,l as asBoolean,f as asInteger,u as asNumber,h as asString,M as default,c as effect,E as uiRef};