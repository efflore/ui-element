const t=t=>e=>typeof e===t,e=t("object"),s=t("function"),n=t=>null==t,r=t=>null!=t,c=t=>r(t)&&(e(t)||s(t)),o=(t,e)=>s(t[e]),a=t=>t.nodeType!==Node.COMMENT_NODE,i=t=>n(t)?[]:[t],l=(t,e)=>({elements:e,host:t,map:s=>l(t,e.map((e=>s(t,e))))}),u=t=>({run:()=>t()});let d;const h=t=>c(t)&&o(t,"set"),f=t=>h(t)||(t=>c(t)&&o(t,"run")&&"effects"in t)(t),b=t=>{const e=()=>(d&&e.effects.add(d),t);return e.effects=new Set,e.set=n=>{const r=t;t=s(n)&&!f(n)?n(t):n,Object.is(t,r)||(t=>{for(const e of t)e.run()})(e.effects)},e},p=t=>{const e=new Map,n=()=>{const r=d;d=n;const c=t(((t,s)=>{e.has(t)||e.set(t,new Set),e.get(t)?.add(s)}));for(const t of e.values()){for(const e of t)e.run();t.clear()}d=r,s(c)&&queueMicrotask(c)};n.run=()=>n(),n.targets=e,n()},g=t=>({map:()=>g(t),fold:e=>e(t),catch:e=>e(t)}),m=t=>{try{return e=t(),{map:t=>m((()=>t(e))),fold:(t,s)=>s(e),catch:()=>{}}}catch(t){return g(t)}var e},C="context-request";class v extends Event{context;callback;subscribe;constructor(t,e,s=!1){super(C,{bubbles:!0,composed:!0}),this.context=t,this.callback=e,this.subscribe=s}}const x="error",y=(t,e,s="debug")=>((t=>"warn"===t||t===x)(s)&&console[s](e,t),t),k=t=>s(t)?k(t()):t,M=t=>t.shadowRoot||t;class S extends HTMLElement{static registry=customElements;static attributeMap={};static consumedContexts;static providedContexts;static define(t){m((()=>!this.registry.get(t)&&this.registry.define(t,this))).catch((e=>y(t,e.message,x)))}#t=new Map;attributeChangedCallback(t,e,n){if(n===e)return;const r=this.constructor.attributeMap[t];this.set(t,s(r)?r(i(n),this,e)[0]:n)}connectedCallback(){const t=this.constructor,e=t.consumedContexts||[];for(const t of e)this.set(String(t),void 0);setTimeout((()=>{for(const t of e)this.dispatchEvent(new v(t,(e=>this.set(String(t),e))))}));const n=t.providedContexts||[];n.length&&this.addEventListener(C,(t=>{const{context:e,callback:r}=t;n.includes(e)&&s(r)&&(t.stopPropagation(),r(this.#t.get(String(e))))}))}disconnectedCallback(){}has(t){return this.#t.has(t)}get(t){return k(this.#t.get(t))}set(t,e,s=!0){if(this.#t.has(t)){if(s){const s=this.#t.get(t);h(s)&&s.set(e)}}else this.#t.set(t,f(e)?e:b(e))}delete(t){return this.#t.delete(t)}first(t){return l(this,i(M(this).querySelector(t)))}all(t){return l(this,Array.from(M(this).querySelectorAll(t)))}signal(t){return this.#t.get(t)}}const w=t=>async(e,n)=>{await e.constructor.registry.whenDefined(n.localName);for(const[r,c]of Object.entries(t))n.set(r,f(c)?c:s(c)?b(c):e.signal(c));return n},A=t=>Number.isFinite(t)?t:void 0,E=t=>[r(t[0])],N=t=>t.map((t=>parseInt(t,10))).map(A),O=t=>t.map(parseFloat).map(A),L=t=>t,T=t=>t.map((t=>m((()=>JSON.parse(t))).fold((t=>y(void 0,`Failed to parse JSON: ${t.message}`,x)),(t=>t)))),j=(t,e,s)=>(n,r)=>(r.addEventListener(t,(t=>n.set(e,(e=>s(t,e))))),r),q=(t,e,s,r,c,o)=>{const a=u(c);return t.set(e,r,!1),p((r=>{if(t.has(e)){const c=t.get(e);n(c)?r(s,a):r(s,(t=>u(o(t)))(c))}})),s},F=t=>(e,s)=>{const n=s.textContent||"",r=t=>()=>{Array.from(s.childNodes).filter(a).forEach((t=>t.remove())),s.append(document.createTextNode(t))};return q(e,t,s,n,r(n),r)},D=(t,e=t)=>(s,n)=>{const r=e=>()=>n[t]=e;return q(s,e,n,n[t],r(null),r)},J=(t,e=t)=>(s,n)=>q(s,e,n,n.getAttribute(t),(()=>n.removeAttribute(t)),(e=>()=>n.setAttribute(t,e))),P=(t,e=t)=>(s,n)=>{const r=e=>()=>n.toggleAttribute(t,e);return q(s,e,n,n.hasAttribute(t),r(!1),r)},H=(t,e=t)=>(s,n)=>q(s,e,n,n.classList.contains(t),(()=>n.classList.remove(t)),(e=>()=>n.classList.toggle(t,e))),I=(t,e=t)=>(s,n)=>q(s,e,n,n.style[t],(()=>n.style.removeProperty(t)),(e=>()=>n.style[t]=String(e))),R=(t,e={},n,r=S)=>{const o=class extends r{static observedAttributes=c(e.attributeMap)?Object.keys(e.attributeMap):[];static attributeMap=e.attributeMap||{};static providedContexts=e.providedContexts||[];static consumedContexts=e.consumedContexts||[];disconnect;connectedCallback(){if(super.connectedCallback(),!s(n))return;const t=n(this);s(t)&&(this.disconnect=t)}disconnectedCallback(){"disconnectedCallback"in r&&super.disconnectedCallback(),this.disconnect()}};return o.define(t),o};export{S as UIElement,E as asBoolean,N as asInteger,T as asJSON,O as asNumber,L as asString,R as component,p as effect,u as io,i as maybe,j as on,w as pass,J as setAttribute,D as setProperty,I as setStyle,F as setText,P as toggleAttribute,H as toggleClass,l as ui};
